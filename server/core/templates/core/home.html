{% extends "core/base.html" %}
{% load static %}

{% block header_add %}
    <link rel='stylesheet' type='text/css' href={% static "core/css/home.css" %} xmlns="http://www.w3.org/1999/html"/>
    <link rel='stylesheet' type='text/css' href={% static "core/css/spinner.css" %} />
    <link rel='stylesheet' type='text/css' href={% static "core/css/apple-checkbox.css" %} />
{% endblock %}

{% block content %}
    <form class="form-jobs" enctype='multipart/form-data' action={% url "index" %} method='post'>
    {% csrf_token %}
        <h1 align="center">Job submission</h1>
        <hr>
        <h4 align="center">Enter information to start prediction</h4>
        <br>

        {# Job name #}
        <div class="row">
            <div class="col-sm-4 col-sm-offset-4">
                <div class="form-group {% if form.job_name.errors %}has-error has-feedback{% endif %}"
                     style="text-align: center;">
                    <label for="id_job_name" style="font-weight: normal;">{{ form.job_name.label }}</label>
                    <input class="form-control center-text"
                           style="height: 40px; margin:auto;"
                           type="text" name="job_name" id="id_job_name" placeholder="Job name" maxlength="100"/>
                    {% if form.job_name.errors %}
                        <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                    {% endif %}
                    <p class="_help-text" align="center">{{ form.job_name.help_text }}</p>
                </div>
            </div>
        </div>

        <br>

        {# Parameters #}
        <div class="row">
            {# age - required #}
            <div class="col-sm-4 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.age.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_age" style="font-weight: normal;">{{ form.age.label }}</label>
                            <input type="number"
                                   class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="age" id="id_age" maxlength="100" min="0" max="160" required>
                            {% if form.age.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.age.help_text }}</p>
                    </div>
                </div>
            </div>
            {# sex #}
            <div class="col-sm-4">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.sex.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_sex" style="font-weight: normal;">{{ form.sex.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="sex" id="id_sex">
                                <option value="1">Male</option>
                                <option value="2">Female</option>
                                <option value="3">Other</option>
                            </select>
                            {% if form.sex.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.sex.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# race #}
            <div class="col-sm-4 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.race.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_race" style="font-weight: normal;">{{ form.race.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="race" id="id_race">
                                <option value="1">White</option>
                                <option value="2">Black/African American American Indian/Alaska</option>
                                <option value="3">Native</option>
                                <option value="4">Hispanic/Latinx</option>
                                <option value="5">Asian</option>
                                <option value="6">Middle Eastern</option>
                                <option value="7">Other</option>
                            </select>
                            {% if form.race.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.race.help_text }}</p>
                    </div>
                </div>
            </div>
            {# education level - required #}
            <div class="col-sm-4">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.education_level.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_education" style="font-weight: normal;">{{ form.education_level.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="education_level" id="id_education" required>
                                <option value="1">High school, but did not graduate</option>
                                <option value="2">High school graduate</option>
                                <option value="3">Attended some college</option>
                                <option value="4">College graduate or higher</option>
                            </select>
                            {% if form.education_level.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.education_level.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# family history #}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.family_history.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_family" style="font-weight: normal;">{{ form.family_history.label }}</label>
                            <br>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="family_history" id="id_family">
                                <option value="1">YES</option>
                                <option value="2">NO</option>
                                <option value="3">Not Sure</option>
                            </select>
                            {% if form.family_history.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.family_history.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# diagnosis history #}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.diagnosis_history.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_diagnosis" style="font-weight: normal;">{{ form.diagnosis_history.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="diagnosis_history" id="id_diagnosis">
                                <option value="1">YES</option>
                                <option value="2">NO</option>
                                <option value="3">Not Sure</option>
                            </select>
                            {% if form.diagnosis_history.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.diagnosis_history.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# height #}
            <div class="col-sm-4 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.height.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_height" style="font-weight: normal;">{{ form.height.label }}</label>
                            <input type="text"
                                   class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="height" id="id_height" maxlength="8">
                            {% if form.height.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.height.help_text }}</p>
                    </div>
                </div>
            </div>
            {# weight #}
            <div class="col-sm-4">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.weight.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_weight" style="font-weight: normal;">{{ form.weight.label }}</label>
                            <input type="number"
                                   class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="weight" id="id_weight" min="0" max="400">
                            {% if form.weight.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.weight.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <br>

        <div class="row">
            {# alcohol frequency #}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.alcohol_frequency.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_alcohol" style="font-weight: normal;">{{ form.alcohol_frequency.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="alcohol_frequency" id="id_alcohol">
                                <option value="1">Rarely/Never</option>
                                <option value="2">Occasionally</option>
                                <option value="3">Weekly</option>
                                <option value="4">Daily</option>
                            </select>
                            {% if form.alcohol_frequency.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.alcohol_frequency.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# smoking year #}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.smoking_year.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_smoking" style="font-weight: normal;">{{ form.smoking_year.label }}</label>
                            <select class="form-control center-text"
                                   style="margin:auto; height:40px;"
                                   name="smoking_year" id="id_smoking">
                                <option value="1">Rarely/Never</option>
                                <option value="2">Less than 5 years</option>
                                <option value="3">5-9 years</option>
                                <option value="4">10-20 years</option>
                                <option value="4">More than 20 years</option>
                            </select>
                            {% if form.smoking_year.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.smoking_year.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# image - required#}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <div class="form-group {% if form.img.errors %}has-error has-feedback{% endif %}"
                         style="text-align: center;">
                            <label for="id_img" style="font-weight: normal;">{{ form.img.label }}</label>
                            <input type="file" id="id_img" name="img" required>
                            {% if form.img.errors %}
                                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
                            {% endif %}
                        <p class="_help-text" align="center">{{ form.img.help_text }}</p>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            {# image example #}
            <div class="col-sm-8 col-sm-offset-2">
                <div style="display: flex; justify-content: center; align-items: center">
                    <img src="../../static/example.png" alt="example image">
                    </div>
                </div>
            </div>
        </div>

        <br>
        <hr>

        {% if user.username == "anonym" %}
            <div style="display: flex; justify-content: center">
                <div class="form-group" style="margin: 0 auto; width: fit-content; width: -moz-fit-content">
                    <input type="checkbox" id="id_noncommercial" class="ios8-switch ios8-switch-lg" required>
                    <label for='id_noncommercial' style="font-weight: normal; line-height: 20px;">
                        I will use {{ SERVER_NAME }} for non-commercial purposes only
                    </label>
                    <input type="checkbox" id="id_agreedatastorage" class="ios8-switch ios8-switch-lg" required>
                    <label for='id_agreedatastorage' style="font-weight: normal; line-height: 20px;">
                        I agree {{ SERVER_NAME }} to store my submitted data for further academic research
                    </label>
                </div>
            </div>
        {% endif %}

        {# Submit button #}
        <div class="form-group jobs-submit text-center">
            <button type="submit" class="btn btn-primary btn-md" id="submit_button" name="action" value="submit">Submit job</button>
        </div>

        <div id="spinner" style="display: none">
            <p align="center">Processing input..</p>
            <div class="spinner" style="margin: auto;"></div>
        </div>
    </form>

{% endblock %}
